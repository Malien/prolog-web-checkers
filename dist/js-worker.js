(()=>{"use strict";var e={9870:(e,t,n)=>{n.r(t),n.d(t,{createEndpoint:()=>o,expose:()=>u,proxy:()=>b,proxyMarker:()=>r,releaseProxy:()=>a,transfer:()=>v,transferHandlers:()=>c,windowEndpoint:()=>x,wrap:()=>l});const r=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),a=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.thrown"),i=e=>"object"==typeof e&&null!==e||"function"==typeof e,c=new Map([["proxy",{canHandle:e=>i(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return u(e,t),[n,[n]]},deserialize:e=>(e.start(),l(e))}],["throw",{canHandle:e=>i(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(e,t=self){t.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:o,type:a,path:i}=Object.assign({path:[]},r.data),c=(r.data.argumentList||[]).map(h);let l;try{const t=i.slice(0,-1).reduce(((e,t)=>e[t]),e),n=i.reduce(((e,t)=>e[t]),e);switch(a){case 0:l=n;break;case 1:t[i.slice(-1)[0]]=h(r.data.value),l=!0;break;case 2:l=n.apply(t,c);break;case 3:l=b(new n(...c));break;case 4:{const{port1:t,port2:n}=new MessageChannel;u(e,n),l=v(t,[t])}break;case 5:l=void 0}}catch(e){l={value:e,[s]:0}}Promise.resolve(l).catch((e=>({value:e,[s]:0}))).then((e=>{const[r,s]=g(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),s),5===a&&(t.removeEventListener("message",n),f(t))}))})),t.start&&t.start()}function f(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function l(e,t){return d(e,[],t)}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function d(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(n,o){if(p(r),o===a)return()=>E(e,{type:5,path:t.map((e=>e.toString()))}).then((()=>{f(e),r=!0}));if("then"===o){if(0===t.length)return{then:()=>s};const n=E(e,{type:0,path:t.map((e=>e.toString()))}).then(h);return n.then.bind(n)}return d(e,[...t,o])},set(n,o,a){p(r);const[s,i]=g(a);return E(e,{type:1,path:[...t,o].map((e=>e.toString())),value:s},i).then(h)},apply(n,a,s){p(r);const i=t[t.length-1];if(i===o)return E(e,{type:4}).then(h);if("bind"===i)return d(e,t.slice(0,-1));const[c,u]=y(s);return E(e,{type:2,path:t.map((e=>e.toString())),argumentList:c},u).then(h)},construct(n,o){p(r);const[a,s]=y(o);return E(e,{type:3,path:t.map((e=>e.toString())),argumentList:a},s).then(h)}});return s}function y(e){const t=e.map(g);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const m=new WeakMap;function v(e,t){return m.set(e,t),e}function b(e){return Object.assign(e,{[r]:!0})}function x(e,t=self,n="*"){return{postMessage:(t,r)=>e.postMessage(t,n,r),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function g(e){for(const[t,n]of c)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:3,name:t,value:r},o]}return[{type:0,value:e},m.get(e)||[]]}function h(e){switch(e.type){case 3:return c.get(e.name).deserialize(e.value);case 0:return e.value}}function E(e,t,n){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===o&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)}))}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};(()=>{const e=n(9870),t=e=>e>>2&1,r=e=>1&e,o=e=>3&e,a=e=>1&e,s=(e,{x:t,y:n})=>e[8*n+t],i=e=>new Uint8Array(e),c=(e,{x:t,y:n},r)=>{e[8*n+t]=r};const u=(e,t)=>c(e,t,1),f=(e,t,n)=>{var r,o;c(e,n,(r=n.y,5===(o=s(e,t))&&7===r?7:4===o&&0===r?6:o)),u(e,t)},l=(e,t)=>1!==s(e,t),p=(e,n,o)=>{const a=s(e,n);return!!t(a)&&o!==(e=>r(e))(a)},d=(e,t)=>e+t,y=(e,t)=>e-t,m=(e,t)=>(n,r,o)=>{if(!p(n,r,e))return t(n,r,o)},v=(e,t)=>(n,r,o)=>{if(o===e)return t(n,r,o)},b=(e,t)=>(n,r,o)=>{if(e(r))return t(n,r,o)},x=(e,t)=>(n,r,o)=>{const{x:s,y:c}=r,d={x:e(s,1),y:t(c,1)},y={x:e(s,2),y:t(c,2)};if(!(p(n,d,a(o))&&!l(n,y)))return;const m=i(n);return f(m,r,y),u(m,d),{from:r,to:y,nextBoard:m}},g=(e,t)=>(n,r)=>{const{x:o,y:a}=r,s={x:e(o,1),y:t(a,1)};if(l(n,s))return;const c=i(n);return f(c,r,s),{from:r,to:s,nextBoard:c}},h=b((({x:e,y:t})=>e>1&&t>1),x(y,y)),E=b((({x:e,y:t})=>e<6&&t>1),x(d,y)),I=b((({x:e,y:t})=>e>1&&t<6),x(y,d)),w=b((({x:e,y:t})=>e<6&&t<6),x(d,d)),N=[m(0,h),m(0,E),m(1,I),m(1,w),v(2,I),v(2,w),v(3,h),v(3,E)],M=b((({x:e,y:t})=>e>0&&t>0),g(y,y)),S=b((({x:e,y:t})=>e<7&&t>0),g(d,y)),k=b((({x:e,y:t})=>e>0&&t<7),g(y,d)),T=b((({x:e,y:t})=>e<7&&t<7),g(d,d)),O=[m(0,M),m(0,S),m(1,k),m(1,T),v(2,k),v(2,T),v(3,M),v(3,S)];function*P(e,n){for(let r=0;r<8;++r)for(let i=0;i<8;++i){const c={x:i,y:r},u=s(e,c);if(t(u)){const e=o(u);n===a(e)&&(yield{position:c,piece:e})}}}function*j(e,t,n,r){for(const o of e){const e=o(t,n,r);e&&(yield e)}}function*L(e,t,n){for(const r of j(N,e,t,n)){let e=!1;for(const t of L(r.nextBoard,r.to,n))e=!0,yield t;e||(yield r)}}const B=(e,t,n)=>{for(const r of j(N,e,t,n))return!0;return!1},_=e=>0===e?1:0,A=(e,t)=>{for(const{position:n,piece:r}of P(e,t)){for(const t of j(O,e,n,r))return!0;for(const t of j(N,e,n,r))return!0}return!1},F=e=>A(e,0)?A(e,1)?e.reduce(((e,n)=>{return e+(-2*r(o=n)+1)*(t(o)+5*(e=>e>>1&1)(o));var o})):200:-200;function z(e){return 1===e}function C(e,t,n){if(0===n)return[null,F(e)];const r=R(e,t);return z(t)?Y(r,_(t),n-1):G(r,_(t),n-1)}const V=(e,t)=>(n,r,o)=>{let a,s=e;for(const e of n){const n=C(e.nextBoard,r,o),i=n?n[1]:F(e.nextBoard);t(i,s)&&(s=i,a=e)}return a&&[a,s]},Y=V(Number.POSITIVE_INFINITY,((e,t)=>e<t)),G=V(Number.NEGATIVE_INFINITY,((e,t)=>e>t)),H=(e,t,n,r,o)=>{if(0==o)return[null,F(e)];const a=R(e,t);if(z(t)){let e,s=Number.POSITIVE_INFINITY;for(const i of a){const a=H(i.nextBoard,_(t),n,r,o-1),c=a?a[1]:F(i.nextBoard);if(c<s&&(s=c,e=i,r=Math.min(r,s)),r<=n)break}return e&&[e,s]}{let e,s=Number.NEGATIVE_INFINITY;for(const i of a){const a=H(i.nextBoard,_(t),n,r,o-1),c=a?a[1]:F(i.nextBoard);if(c>s&&(s=c,e=i,n=Math.max(n,s)),n>=r)break}return e&&[e,s]}};function*R(e,t){let n=!1;for(const{position:r,piece:o}of P(e,t))for(const t of L(e,r,o))n=!0,yield t;if(!n)for(const{position:n,piece:r}of P(e,t))for(const t of j(O,e,n,r))yield t}const U={movesFor:(e,n)=>{const r=s(e,n);if(!t(r))return[];const i=o(r);return((e,t)=>{for(const{position:n,piece:r}of P(e,t))if(B(e,n,r))return!0;return!1})(e,a(i))?[...L(e,n,i)]:[...j(O,e,n,i)]},canEat:(e,t)=>[...P(e,t)].filter((({position:t,piece:n})=>B(e,t,n))).map((e=>e.position)),evaluateBestMove:(e,t,n,r)=>{if("minimax"===n)return C(e,t,r);if("alphabeta"===n)return H(e,t,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,r);throw new Error("Not implemented")},availableMoves:(e,t)=>[...R(e,t)]};e.expose(U)})()})();